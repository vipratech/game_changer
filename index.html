<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Changer</title>
    <link href="https://fonts.googleapis.com/css2?family=Copperplate&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* --- 1. RESET & BASICS --- */
        * { box-sizing: border-box; user-select: none; }
        body {
            margin: 0;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Roboto', sans-serif;
            overflow: hidden; 
        }

        /* --- 2. MAIN SLIDE CONTAINER --- */
        .slide-container {
            width: 1280px;
            height: 720px;
            background: radial-gradient(circle at center, #001540 0%, #000510 100%);
            position: relative;
            border: 4px solid #333;
            border-radius: 10px;
            box-shadow: 0 0 50px rgba(0, 60, 255, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform-origin: center center;
            transition: transform 0.1s ease-out;
        }

        /* Background Grid Effect */
        .slide-container::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(rgba(0, 100, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 100, 255, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: 0;
            pointer-events: none;
        }

        /* --- 3. LAYOUTS --- */
        .screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .screen.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Intro Screen */
        .intro-content { text-align: center; z-index: 2; }
        .logo-title {
            font-family: 'Copperplate', serif;
            font-size: 80px;
            background: linear-gradient(to bottom, #fff, #80d8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(0, 150, 255, 0.8);
        }
        .start-btn {
            background: linear-gradient(180deg, #ffb300, #ff6f00);
            border: 2px solid #fff;
            color: #000;
            font-size: 32px;
            padding: 15px 60px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 0 20px #ff6f00;
            transition: transform 0.2s;
            margin-top: 40px;
        }
        .start-btn:hover { transform: scale(1.1); }

        /* Game UI */
        .top-bar {
            position: absolute;
            top: 20px;
            width: 100%;
            padding: 0 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .category-pill {
            background: #000;
            border: 1px solid #ffd700;
            color: #ffd700;
            padding: 8px 25px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
        }

        .question-number {
            font-size: 24px;
            color: #fff;
            font-weight: bold;
            text-shadow: 0 0 10px #0091ea;
        }

        .timer-wrapper {
            position: relative;
            width: 80px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .timer-text {
            position: absolute;
            color: #fff;
            font-weight: bold;
            font-size: 30px;
        }
        svg.timer-svg { transform: rotate(-90deg); width: 80px; height: 80px; }
        circle { fill: none; stroke-width: 6; }
        .c-bg { stroke: #333; }
        .c-progress { 
            stroke: #ff9100; 
            stroke-dasharray: 226; 
            stroke-dashoffset: 0; 
            transition: stroke-dashoffset 1s linear; 
        }

        /* Question & Answers */
        .game-area {
            width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 60px;
        }

        .question-box {
            background: linear-gradient(180deg, #0d47a1, #000);
            border: 3px solid #fff;
            border-radius: 50px;
            width: 100%;
            min-height: 140px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 40px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.8), 0 0 20px rgba(0,145,234, 0.5);
        }
        
        /* Decorative lines */
        .question-box::before, .question-box::after {
            content: ''; position: absolute; top: 50%; width: 100px; height: 2px; background: #fff;
        }
        .question-box::before { left: -100px; }
        .question-box::after { right: -100px; }

        .q-text { font-size: 32px; color: #fff; line-height: 1.3; }

        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            width: 100%;
        }

        .option-btn {
            background: linear-gradient(180deg, #000, #1a237e);
            border: 2px solid #666;
            border-radius: 40px;
            padding: 15px 30px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: 0.2s;
            position: relative;
        }
        .option-btn:hover { background: linear-gradient(180deg, #1565c0, #0d47a1); border-color: #fff; }
        
        .option-label { color: #ffd700; font-weight: bold; font-size: 24px; margin-right: 15px; }
        .option-text { color: #fff; font-size: 22px; }

        /* Interaction States */
        .option-btn.selected { background: #ff9100; border-color: #fff; }
        .option-btn.correct { background: #00c853; border-color: #fff; box-shadow: 0 0 30px #00c853; animation: pulse 1s infinite; }
        .option-btn.wrong { background: #d50000; opacity: 0.5; }

        @keyframes pulse { 0% { box-shadow: 0 0 10px #00c853; } 50% { box-shadow: 0 0 30px #00c853; } 100% { box-shadow: 0 0 10px #00c853; } }

        .lifelines-panel {
            position: absolute;
            bottom: 30px;
            display: flex;
            gap: 20px;
        }
        .life-icon {
            font-size: 30px;
            color: #fff;
            opacity: 0.8;
            cursor: pointer;
            border: 2px solid #fff;
            border-radius: 50%;
            width: 60px; height: 60px;
            display: grid; place-items: center;
            transition: 0.3s;
        }
        .life-icon:hover { transform: translateY(-5px); opacity: 1; background: rgba(255,255,255,0.1); }
        .life-icon.used { opacity: 0.3; border-color: #555; cursor: default; position: relative; }
        .life-icon.used::after { content: '\f00d'; font-family: "Font Awesome 6 Free"; font-weight: 900; color: red; position: absolute; font-size: 40px; }

        /* Next Button */
        .nav-btn {
            position: absolute;
            bottom: 30px;
            right: 40px;
            background: rgba(255,255,255,0.2);
            border: 1px solid #fff;
            color: #fff;
            padding: 10px 20px;
            cursor: pointer;
            display: none; /* Hidden until answer revealed */
        }
        .nav-btn:hover { background: rgba(255,255,255,0.4); }

        /* Results */
        .result-score { font-size: 100px; color: #ffd700; margin: 20px 0; font-family: 'Copperplate', serif; }
        .result-text { font-size: 24px; color: #ccc; }

        /* Audio Control */
        .mute-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 50;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 50%;
            border: 1px solid #fff;
        }
    </style>
</head>
<body>

    <!-- AUDIO ELEMENTS -->
    <!-- Using Google Actions Sound Library for Demo Purposes -->
    <!-- Loop: Industrial Hum for suspense -->
    <audio id="bg-music" loop src="https://actions.google.com/sounds/v1/science_fiction/sci_fi_vortex.ogg"></audio>
    <!-- Timer: Ticking Clock -->
    <audio id="sfx-timer" loop src="https://actions.google.com/sounds/v1/household/clock_ticking.ogg"></audio>
    <!-- Lock In: Button Click -->
    <audio id="sfx-select" src="https://actions.google.com/sounds/v1/office/click_continuous.ogg"></audio>
    <!-- Correct: Magic Chime -->
    <audio id="sfx-correct" src="https://actions.google.com/sounds/v1/cartoon/magic_chime.ogg"></audio>
    <!-- Wrong: Slide Whistle Down -->
    <audio id="sfx-wrong" src="https://actions.google.com/sounds/v1/cartoon/slide_whistle_to_drum.ogg"></audio>

    <div class="slide-container">
        <div class="mute-btn" onclick="toggleMute()"><i id="mute-icon" class="fa-solid fa-volume-high"></i></div>
        
        <!-- INTRO SCREEN -->
        <div id="intro-screen" class="screen active">
            <div class="intro-content">
                <div class="logo-title">QUIZ<br>MASTER</div>
                <p style="color: #b3e5fc; font-size: 24px;">Who's the Smartest?</p>
                <button class="start-btn" onclick="startGame()">PLAY NOW</button>
            </div>
        </div>

        <!-- GAME SCREEN -->
        <div id="game-screen" class="screen">
            <div class="top-bar">
                <div class="category-pill" id="category-display">General</div>
                <div class="question-number">Q: <span id="q-num">1</span> / <span id="total-q">100</span></div>
                <div class="timer-wrapper">
                    <svg class="timer-svg">
                        <circle class="c-bg" cx="40" cy="40" r="36"></circle>
                        <circle id="timer-bar" class="c-progress" cx="40" cy="40" r="36"></circle>
                    </svg>
                    <div class="timer-text" id="timer-val">30</div>
                </div>
            </div>

            <div class="game-area">
                <div class="question-box">
                    <div class="q-text" id="question-text">Question text goes here?</div>
                </div>
                <div class="answers-grid" id="answers-container">
                    <!-- Buttons generated by JS -->
                </div>
            </div>

            <!-- <div class="lifelines-panel">
                <div class="life-icon" onclick="useLifeline('5050', this)" title="50:50">50:50</div>
                <div class="life-icon" onclick="useLifeline('skip', this)" title="Skip Question"><i class="fa-solid fa-forward"></i></div>
                <div class="life-icon" onclick="useLifeline('time', this)" title="+30 Seconds"><i class="fa-solid fa-clock"></i></div>
            </div> -->

            <button class="nav-btn" id="next-btn" onclick="nextQuestion()">NEXT ‚ùØ</button>
        </div>

        <!-- END SCREEN -->
        <div id="end-screen" class="screen">
            <h1 class="logo-title">GAME OVER</h1>
            <div class="result-text">You scored:</div>
            <div class="result-score"><span id="final-score">0</span> / <span id="final-total">100</span></div>
            <button class="start-btn" onclick="location.reload()">PLAY AGAIN</button>
        </div>

    </div>

    <script>
        // --- AUDIO ENGINE ---
        let isMuted = false;
        const sounds = {
            bg: document.getElementById('bg-music'),
            timer: document.getElementById('sfx-timer'),
            select: document.getElementById('sfx-select'),
            correct: document.getElementById('sfx-correct'),
            wrong: document.getElementById('sfx-wrong')
        };

        // Set volumes
        sounds.bg.volume = 0.3; // Lower background hum
        sounds.timer.volume = 0.5;

        function toggleMute() {
            isMuted = !isMuted;
            const icon = document.getElementById('mute-icon');
            if(isMuted) {
                icon.classList.remove('fa-volume-high');
                icon.classList.add('fa-volume-xmark');
                // Pause all
                Object.values(sounds).forEach(s => s.pause());
            } else {
                icon.classList.remove('fa-volume-xmark');
                icon.classList.add('fa-volume-high');
                // Resume ambient
                if(document.getElementById('game-screen').classList.contains('active')) {
                    playAudio('bg');
                    if(timeLeft > 0 && canAnswer) playAudio('timer');
                }
            }
        }

        function playAudio(name) {
            if(isMuted) return;
            const sound = sounds[name];
            if(sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log("Audio play failed (user interaction needed or blocked):", e));
            }
        }

        function stopAudio(name) {
            const sound = sounds[name];
            if(sound) {
                sound.pause();
                sound.currentTime = 0;
            }
        }


        // --- DATABASE OF 100 QUESTIONS ---
        const questions = [
            // --- USA HISTORY ---
            { cat: "USA History", q: "In which year was the Declaration of Independence signed?", opts: ["1776", "1789", "1812", "1492"], a: 0 },
            { cat: "USA History", q: "Who was the first President of the United States?", opts: ["Thomas Jefferson", "Abraham Lincoln", "George Washington", "John Adams"], a: 2 },
            { cat: "USA History", q: "Which war was fought between the North and South from 1861-1865?", opts: ["Revolutionary War", "Civil War", "World War I", "Vietnam War"], a: 1 },
            { cat: "USA History", q: "The Louisiana Purchase involved buying land from which country?", opts: ["Spain", "Great Britain", "France", "Russia"], a: 2 },
            { cat: "USA History", q: "Which amendment granted women the right to vote?", opts: ["13th", "15th", "19th", "21st"], a: 2 },
            { cat: "USA History", q: "In what year did the Apollo 11 mission land on the moon?", opts: ["1959", "1969", "1972", "1981"], a: 1 },
            { cat: "USA History", q: "Who is known as the 'Father of the Constitution'?", opts: ["James Madison", "Alexander Hamilton", "Benjamin Franklin", "Thomas Jefferson"], a: 0 },
            { cat: "USA History", q: "The United States fought against whom in the War of 1812?", opts: ["France", "Spain", "Great Britain", "Mexico"], a: 2 },
            { cat: "USA History", q: "Which President signed the Emancipation Proclamation?", opts: ["Andrew Jackson", "Ulysses S. Grant", "Abraham Lincoln", "Teddy Roosevelt"], a: 2 },
            { cat: "USA History", q: "Who was the primary rival of the US during the Cold War?", opts: ["China", "Germany", "Soviet Union", "Japan"], a: 2 },

            // --- USA MONUMENTS ---
            { cat: "USA Monuments", q: "In which harbor does the Statue of Liberty stand?", opts: ["Boston Harbor", "New York Harbor", "Pearl Harbor", "Baltimore Harbor"], a: 1 },
            { cat: "USA Monuments", q: "Mount Rushmore is located in which US state?", opts: ["North Dakota", "South Dakota", "Montana", "Wyoming"], a: 1 },
            { cat: "USA Monuments", q: "The Golden Gate Bridge is an iconic symbol of which city?", opts: ["Los Angeles", "San Diego", "Seattle", "San Francisco"], a: 3 },
            { cat: "USA Monuments", q: "The Gateway Arch is located in which city?", opts: ["Kansas City", "St. Louis", "Chicago", "Denver"], a: 1 },
            { cat: "USA Monuments", q: "The Lincoln Memorial features a large statue of Lincoln doing what?", opts: ["Standing", "Riding a Horse", "Seated", "Writing"], a: 2 },
            { cat: "USA Monuments", q: "Where can you find the Liberty Bell?", opts: ["Washington D.C.", "Boston", "Philadelphia", "New York City"], a: 2 },
            { cat: "USA Monuments", q: "The Space Needle is a landmark in which city?", opts: ["Portland", "Seattle", "Vancouver", "Las Vegas"], a: 1 },
            { cat: "USA Monuments", q: "The Alamo is a historic mission located in which city?", opts: ["Austin", "Houston", "Dallas", "San Antonio"], a: 3 },
            { cat: "USA Monuments", q: "What is the shape of the Washington Monument?", opts: ["Pyramid", "Sphere", "Obelisk", "Cube"], a: 2 },
            { cat: "USA Monuments", q: "The Hoover Dam was built on which river?", opts: ["Mississippi", "Colorado", "Missouri", "Rio Grande"], a: 1 },

            // --- USA FAMOUS PERSONALITIES ---
            { cat: "USA People", q: "Who delivered the famous 'I Have a Dream' speech?", opts: ["Malcolm X", "Martin Luther King Jr.", "John F. Kennedy", "Barack Obama"], a: 1 },
            { cat: "USA People", q: "Which inventor is credited with the practical electric light bulb?", opts: ["Nikola Tesla", "Alexander Graham Bell", "Thomas Edison", "Benjamin Franklin"], a: 2 },
            { cat: "USA People", q: "Who became the first female Vice President of the USA?", opts: ["Hillary Clinton", "Sarah Palin", "Kamala Harris", "Condoleezza Rice"], a: 2 },
            { cat: "USA People", q: "Who co-founded Microsoft?", opts: ["Steve Jobs", "Bill Gates", "Mark Zuckerberg", "Jeff Bezos"], a: 1 },
            { cat: "USA People", q: "Rosa Parks is famous for refusing to give up her seat on a...?", opts: ["Train", "Bus", "Plane", "Boat"], a: 1 },
            { cat: "USA People", q: "Who was the first person to walk on the moon?", opts: ["Buzz Aldrin", "Yuri Gagarin", "Neil Armstrong", "John Glenn"], a: 2 },
            { cat: "USA People", q: "Who was known as the 'King of Rock and Roll'?", opts: ["Michael Jackson", "Prince", "Elvis Presley", "Johnny Cash"], a: 2 },
            { cat: "USA People", q: "Which animator created Mickey Mouse?", opts: ["Walt Disney", "Chuck Jones", "Tex Avery", "William Hanna"], a: 0 },
            { cat: "USA People", q: "Benjamin Franklin is famous for his experiment with lightning and a...?", opts: ["Balloon", "Rod", "Kite", "Jar"], a: 2 },
            { cat: "USA People", q: "Amelia Earhart was famous for being the first woman to fly solo across...?", opts: ["The Pacific", "The Atlantic", "The US", "The World"], a: 1 },

            // --- USA TEXAS ---
            { cat: "Texas", q: "What is the capital city of Texas?", opts: ["Houston", "Dallas", "San Antonio", "Austin"], a: 3 },
            { cat: "Texas", q: "What is the official nickname of Texas?", opts: ["The Sunshine State", "The Lone Star State", "The Golden State", "The Empire State"], a: 1 },
            { cat: "Texas", q: "Which famous battle cry originated from the Texas Revolution?", opts: ["Victory or Death", "Remember the Alamo", "Don't Tread on Me", "Come and Take It"], a: 1 },
            { cat: "Texas", q: "Which industry is most historically associated with the Texas economy?", opts: ["Technology", "Automotive", "Oil/Energy", "Mining"], a: 2 },
            { cat: "Texas", q: "Which city is home to NASA's Johnson Space Center?", opts: ["Austin", "Dallas", "Houston", "Fort Worth"], a: 2 },
            { cat: "Texas", q: "What is the state flower of Texas?", opts: ["Bluebonnet", "Rose", "Sunflower", "Cactus"], a: 0 },
            { cat: "Texas", q: "Before becoming a US state, Texas was an independent...?", opts: ["Kingdom", "Empire", "Republic", "Colony"], a: 2 },
            { cat: "Texas", q: "Which river forms the border between Texas and Mexico?", opts: ["Red River", "Colorado River", "Rio Grande", "Brazos River"], a: 2 },
            { cat: "Texas", q: "Texas hosts the largest State Fair in the US in which city?", opts: ["Houston", "San Antonio", "Dallas", "El Paso"], a: 2 },
            { cat: "Texas", q: "Which Texas city has the largest population?", opts: ["San Antonio", "Dallas", "Austin", "Houston"], a: 3 },

            // --- HINDU DHARMA FACTS ---
            { cat: "Hindu Dharma", q: "What are the oldest sacred scriptures of Hinduism called?", opts: ["Puranas", "Vedas", "Sutras", "Epics"], a: 1 },
            { cat: "Hindu Dharma", q: "What concept refers to one's righteous duty or moral order?", opts: ["Karma", "Moksha", "Dharma", "Artha"], a: 2 },
            { cat: "Hindu Dharma", q: "What is the cycle of birth, death, and rebirth called?", opts: ["Samsara", "Nirvana", "Maya", "Yoga"], a: 0 },
            { cat: "Hindu Dharma", q: "The law of cause and effect is known as...?", opts: ["Dharma", "Karma", "Bhakti", "Jnana"], a: 1 },
            { cat: "Hindu Dharma", q: "Which sacred sound or syllable represents the universe?", opts: ["Ah", "Om", "Hum", "Ra"], a: 1 },
            { cat: "Hindu Dharma", q: "What is the ultimate, formless reality in Hinduism?", opts: ["Atman", "Brahman", "Deva", "Asura"], a: 1 },
            { cat: "Hindu Dharma", q: "Brahma, Vishnu, and Shiva are collectively known as the...?", opts: ["Trimurti", "Tridevi", "Triloka", "Triveda"], a: 0 },
            { cat: "Hindu Dharma", q: "Which river is considered the most holy in Hinduism?", opts: ["Yamuna", "Ganga", "Saraswati", "Narmada"], a: 1 },
            { cat: "Hindu Dharma", q: "Which practice involves physical postures, breath control, and meditation?", opts: ["Puja", "Yajna", "Yoga", "Tapas"], a: 2 },
            { cat: "Hindu Dharma", q: "A spiritual teacher or guide is called a...?", opts: ["Swami", "Pandit", "Guru", "Yogi"], a: 2 },

            // --- HINDU FESTIVALS ---
            { cat: "Hindu Festivals", q: "Which festival is known as the 'Festival of Lights'?", opts: ["Holi", "Diwali", "Navratri", "Pongal"], a: 1 },
            { cat: "Hindu Festivals", q: "Holi is celebrated by throwing what?", opts: ["Water", "Flowers", "Colored Powder", "Rice"], a: 2 },
            { cat: "Hindu Festivals", q: "Raksha Bandhan celebrates the bond between...?", opts: ["Husband & Wife", "Mother & Child", "Teacher & Student", "Brother & Sister"], a: 3 },
            { cat: "Hindu Festivals", q: "Navratri is a festival dedicated to the Goddess spanning how many nights?", opts: ["Seven", "Nine", "Ten", "Twelve"], a: 1 },
            { cat: "Hindu Festivals", q: "Janmashtami celebrates the birth of which deity?", opts: ["Rama", "Shiva", "Krishna", "Ganesha"], a: 2 },
            { cat: "Hindu Festivals", q: "Rama Navami marks the birth of Lord...?", opts: ["Rama", "Krishna", "Vishnu", "Shiva"], a: 0 },
            { cat: "Hindu Festivals", q: "Mahashivaratri is a night dedicated to Lord...?", opts: ["Vishnu", "Brahma", "Shiva", "Indra"], a: 2 },
            { cat: "Hindu Festivals", q: "Ganesh Chaturthi celebrates the birth of the god with the head of an...?", opts: ["Eagle", "Lion", "Monkey", "Elephant"], a: 3 },
            { cat: "Hindu Festivals", q: "Pongal is a harvest festival primarily celebrated in which state?", opts: ["Punjab", "Tamil Nadu", "Kerala", "Gujarat"], a: 1 },
            { cat: "Hindu Festivals", q: "Makar Sankranti marks the transition of the...?", opts: ["Moon", "Sun", "Stars", "Seasons"], a: 1 },

            // --- RAMAYANA ---
            { cat: "Ramayana", q: "Who wrote the epic Ramayana?", opts: ["Vyasa", "Valmiki", "Tulsidas", "Kalidasa"], a: 1 },
            { cat: "Ramayana", q: "Who is the main protagonist of the Ramayana?", opts: ["Krishna", "Arjuna", "Rama", "Bhima"], a: 2 },
            { cat: "Ramayana", q: "Who is the wife of Lord Rama?", opts: ["Radha", "Sita", "Parvati", "Lakshmi"], a: 1 },
            { cat: "Ramayana", q: "Who was the demon king who abducted Sita?", opts: ["Kamsa", "Ravana", "Hiranyakashipu", "Duryodhana"], a: 1 },
            { cat: "Ramayana", q: "Who is the devoted monkey deity who helped Rama?", opts: ["Ganesha", "Hanuman", "Garuda", "Nandi"], a: 1 },
            { cat: "Ramayana", q: "Who is Rama's loyal brother who accompanied him to the forest?", opts: ["Bharata", "Shatrughna", "Lakshmana", "Balarama"], a: 2 },
            { cat: "Ramayana", q: "What was the name of Rama's kingdom?", opts: ["Hastinapura", "Mathura", "Dwaraka", "Ayodhya"], a: 3 },
            { cat: "Ramayana", q: "Which giant bird fought Ravana to save Sita?", opts: ["Garuda", "Jatayu", "Sampati", "Kakabhushundi"], a: 1 },
            { cat: "Ramayana", q: "What was built to cross the ocean to Lanka?", opts: ["Ship", "Tunnel", "Bridge (Ram Setu)", "Flying Chariot"], a: 2 },
            { cat: "Ramayana", q: "Where was Ravana's kingdom located?", opts: ["Ayodhya", "Kishkindha", "Lanka", "Dandakaranya"], a: 2 },

            // --- MAHA BHARATA ---
            { cat: "Mahabharata", q: "Who is traditionally credited with writing the Mahabharata?", opts: ["Valmiki", "Vyasa", "Manu", "Chanakya"], a: 1 },
            { cat: "Mahabharata", q: "The central conflict is between the Pandavas and the...?", opts: ["Yadavas", "Rakshasas", "Kauravas", "Gandharvas"], a: 2 },
            { cat: "Mahabharata", q: "How many Pandava brothers were there?", opts: ["Three", "Five", "Seven", "One Hundred"], a: 1 },
            { cat: "Mahabharata", q: "How many Kaurava brothers were there?", opts: ["Five", "Ten", "Fifty", "One Hundred"], a: 3 },
            { cat: "Mahabharata", q: "Who was the greatest archer among the Pandavas?", opts: ["Yudhisthira", "Bhima", "Arjuna", "Nakula"], a: 2 },
            { cat: "Mahabharata", q: "Which sacred text is a conversation between Krishna and Arjuna?", opts: ["Ramayana", "Vedas", "Upanishads", "Bhagavad Gita"], a: 3 },
            { cat: "Mahabharata", q: "Who was the common wife of the five Pandavas?", opts: ["Kunti", "Madri", "Draupadi", "Subhadra"], a: 2 },
            { cat: "Mahabharata", q: "Who was the eldest Pandava brother?", opts: ["Arjuna", "Bhima", "Yudhisthira", "Sahadeva"], a: 2 },
            { cat: "Mahabharata", q: "Who was the blind king and father of the Kauravas?", opts: ["Pandu", "Dhritarashtra", "Bhishma", "Vidura"], a: 1 },
            { cat: "Mahabharata", q: "Who served as Arjuna's charioteer in the war?", opts: ["Balarama", "Krishna", "Karna", "Drona"], a: 1 },

            // --- SRIMAD BHAGAVATAM ---
            { cat: "Srimad Bhagavatam", q: "The Srimad Bhagavatam primarily focuses on the devotion to whom?", opts: ["Shiva", "Brahma", "Krishna/Vishnu", "Indra"], a: 2 },
            { cat: "Srimad Bhagavatam", q: "Who spoke the Bhagavatam to King Parikshit?", opts: ["Vyasa", "Narada", "Sukadeva Goswami", "Suta Goswami"], a: 2 },
            { cat: "Srimad Bhagavatam", q: "Who was the emperor cursed to die in seven days?", opts: ["Yudhisthira", "Arjuna", "Parikshit", "Janamejaya"], a: 2 },
            { cat: "Srimad Bhagavatam", q: "How many Cantos (books) are in the Srimad Bhagavatam?", opts: ["10", "12", "18", "24"], a: 1 },
            { cat: "Srimad Bhagavatam", q: "Which incarnation of Vishnu appeared as a giant Boar?", opts: ["Matsya", "Kurma", "Varaha", "Vamana"], a: 2 },
            { cat: "Srimad Bhagavatam", q: "Which incarnation appeared as a half-man, half-lion?", opts: ["Varaha", "Narasimha", "Parasurama", "Rama"], a: 1 },
            { cat: "Srimad Bhagavatam", q: "Who was the biological mother of Lord Krishna?", opts: ["Yashoda", "Rohini", "Devaki", "Kunti"], a: 2 },
            { cat: "Srimad Bhagavatam", q: "Which demoness tried to kill baby Krishna with poisoned milk?", opts: ["Putana", "Trinavarta", "Aghasura", "Bakasura"], a: 0 },
            { cat: "Srimad Bhagavatam", q: "The Rasa Lila is a divine dance between Krishna and the...?", opts: ["Devas", "Asuras", "Gopis", "Pandavas"], a: 2 },
            { cat: "Srimad Bhagavatam", q: "Who was the king of elephants saved by Vishnu from a crocodile?", opts: ["Airavata", "Gajendra", "Garuda", "Nandi"], a: 1 }
        ];

        // --- GAME VARIABLES ---
        let currentQIndex = 0;
        let score = 0;
        let timerInterval;
        let timeLeft = 30;
        let canAnswer = false;

        // --- ELEMENTS ---
        const introScreen = document.getElementById('intro-screen');
        const gameScreen = document.getElementById('game-screen');
        const endScreen = document.getElementById('end-screen');
        const qText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const qNumDisplay = document.getElementById('q-num');
        const totalQDisplay = document.getElementById('total-q');
        const finalTotalDisplay = document.getElementById('final-total');
        const catDisplay = document.getElementById('category-display');
        const timerBar = document.getElementById('timer-bar');
        const timerVal = document.getElementById('timer-val');
        const nextBtn = document.getElementById('next-btn');
        const scoreDisplay = document.getElementById('final-score');

        // --- FUNCTIONS ---
        
        function resizeGame() {
            const baseWidth = 1280;
            const baseHeight = 720;
            const scale = Math.min(window.innerWidth / baseWidth, window.innerHeight / baseHeight);
            const container = document.querySelector('.slide-container');
            container.style.transform = `scale(${scale})`;
        }
        window.addEventListener('resize', resizeGame);
        window.addEventListener('load', resizeGame);

        function startGame() {
            currentQIndex = 0;
            score = 0;
            // Update total counters dynamically
            totalQDisplay.innerText = questions.length;
            finalTotalDisplay.innerText = questions.length;
            
            introScreen.classList.remove('active');
            gameScreen.classList.add('active');
            
            // Audio: Start Background Music
            playAudio('bg');
            
            loadQuestion();
        }

        function loadQuestion() {
            // Reset State
            clearInterval(timerInterval);
            timeLeft = 30;
            timerVal.innerText = 30;
            timerBar.style.strokeDashoffset = 0;
            timerBar.style.stroke = '#ff9100';
            canAnswer = true;
            nextBtn.style.display = 'none';
            answersContainer.innerHTML = '';
            
            const qData = questions[currentQIndex];
            
            // Update UI
            qText.innerText = qData.q;
            qNumDisplay.innerText = currentQIndex + 1;
            catDisplay.innerText = qData.cat;

            // Create Buttons
            qData.opts.forEach((opt, index) => {
                const btn = document.createElement('div');
                btn.className = 'option-btn';
                btn.innerHTML = `<span class="option-label">${String.fromCharCode(65 + index)}:</span> <span class="option-text">${opt}</span>`;
                btn.onclick = () => checkAnswer(index, btn);
                answersContainer.appendChild(btn);
            });

            startTimer();
        }

        function startTimer() {
            // Audio: Start Ticking
            playAudio('timer');

            timerInterval = setInterval(() => {
                timeLeft--;
                timerVal.innerText = timeLeft;
                
                // Progress Bar Math (226 is circumference)
                const offset = 226 - (226 * timeLeft / 30);
                timerBar.style.strokeDashoffset = offset;

                if(timeLeft <= 10) timerBar.style.stroke = '#d50000';

                if(timeLeft <= 0) {
                    clearInterval(timerInterval);
                    canAnswer = false;
                    stopAudio('timer');
                    playAudio('wrong'); // Time out sound
                    revealAnswer(false); 
                }
            }, 1000);
        }

        function checkAnswer(selectedIndex, btn) {
            if(!canAnswer) return;
            canAnswer = false;
            clearInterval(timerInterval);
            
            // Audio: Stop Ticking, Play Select
            stopAudio('timer');
            playAudio('select');

            // Visual Select
            btn.classList.add('selected');
            
            const correctIndex = questions[currentQIndex].a;

            setTimeout(() => {
                btn.classList.remove('selected');
                if(selectedIndex === correctIndex) {
                    btn.classList.add('correct');
                    playAudio('correct');
                    score++;
                } else {
                    btn.classList.add('wrong');
                    playAudio('wrong');
                    // Show correct
                    answersContainer.children[correctIndex].classList.add('correct');
                }
                nextBtn.style.display = 'block';
            }, 1000); // 1s Lock-in time
        }

        function revealAnswer() {
            // Used for timeout or skip
            const correctIndex = questions[currentQIndex].a;
            answersContainer.children[correctIndex].classList.add('correct');
            nextBtn.style.display = 'block';
        }

        function nextQuestion() {
            if(currentQIndex < questions.length - 1) {
                currentQIndex++;
                loadQuestion();
            } else {
                endGame();
            }
        }

        function endGame() {
            stopAudio('bg');
            stopAudio('timer');
            playAudio('correct'); // Fanfare for finishing
            
            gameScreen.classList.remove('active');
            endScreen.classList.add('active');
            scoreDisplay.innerText = score;
        }

        // --- LIFELINES ---
        function useLifeline(type, iconBtn) {
            if(!canAnswer || iconBtn.classList.contains('used')) return;
            
            iconBtn.classList.add('used');
            playAudio('select');

            if(type === '5050') {
                // Remove 2 wrong answers
                const correctIndex = questions[currentQIndex].a;
                let removed = 0;
                const opts = Array.from(answersContainer.children);
                
                opts.forEach((btn, idx) => {
                    if(idx !== correctIndex && removed < 2) {
                        btn.style.opacity = '0';
                        btn.style.pointerEvents = 'none';
                        removed++;
                    }
                });
            } else if(type === 'time') {
                // Add time
                timeLeft = Math.min(timeLeft + 30, 60); 
                timerVal.innerText = timeLeft;
            } else if(type === 'skip') {
                clearInterval(timerInterval);
                stopAudio('timer');
                playAudio('correct');
                canAnswer = false;
                score++; // Free point
                revealAnswer(); 
            }
        }

    </script>
</body>
</html>